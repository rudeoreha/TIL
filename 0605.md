# [23.06.05] ì½”ë“œìŠ¤í…Œì´ì¸  (FE) 45ê¸°\_DAY 38

# Unit10 <br><br> ğŸ‘©ğŸ»â€ğŸ’» ê³¼ì œ. StatesAirline Server

## Bare Minimum Requirements

- statesairline/controller/flightController.jsì™€ statesairline/controller/bookController.js ì— ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

- Express ê³µì‹ë¬¸ì„œì—ì„œ req.query , req.paramsë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•˜ì„¸ìš”.

- Queryì™€ Paramsë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ í•„í„°ë§í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

- ì˜ˆì•½ ë°ì´í„°ëŠ” controller/bookController.js ì•ˆì— ì‘ì„±ëœ let booking = []; ë°°ì—´ì— ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.

- Flight API -> í•­ê³µí¸ ìˆ˜ì •ì€ Advanced Challengesì…ë‹ˆë‹¤.

 <br>

flightController.js

```js
const flights = require("../repository/flightList");
const fs = require("fs");

module.exports = {
  // [GET] /flight
  // ìš”ì²­ ëœ íŒŒë¼ë¯¸í„° departure_times, arrival_times ê°’ê³¼ ë™ì¼í•œ ê°’ì„ ê°€ì§„ í•­ê³µí¸ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
  // ìš”ì²­ ëœ íŒŒë¼ë¯¸í„° departure, destination ê°’ê³¼ ë™ì¼í•œ ê°’ì„ ê°€ì§„ í•­ê³µí¸ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
  findAll: (req, res) => {
    const { departure_times, arrival_times, destination, departure } =
      req.query;
    // TODO:
    if (departure_times && arrival_times) {
      let filtered = flights.filter((item) => {
        return (
          item.departure_times === departure_times &&
          item.arrival_times === arrival_times
        );
      });
      return res.json(filtered);
    }
    if (departure && destination) {
      let filtered = flights.filter((item) => {
        return item.departure === departure && item.destination === destination;
      });
      return res.json(filtered);
    }
    return res.json(flights);
  },
  // [GET] /flight/:uuid
  // ìš”ì²­ ëœ uuid ê°’ê³¼ ë™ì¼í•œ uuid ê°’ì„ ê°€ì§„ í•­ê³µí¸ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
  findById: (req, res) => {
    const { uuid } = req.params;
    // TODO:
    if (uuid) {
      let idfilter = flights.filter((item) => {
        return item.uuid === uuid;
      });
      return res.json(idfilter);
    }
  },

  // Advanced
  // [PUT] /flight/:uuid ìš”ì²­ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
  // ìš”ì²­ ëœ uuid ê°’ê³¼ ë™ì¼í•œ uuid ê°’ì„ ê°€ì§„ í•­ê³µí¸ ë°ì´í„°ë¥¼ ìš”ì³¥ ëœ Body ë°ì´í„°ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.
  update: (req, res) => {
    const { uuid } = req.params;
    const bodyData = req.body;
    // TODO:
  },
};
```

bookController.js

```js
// POST /bookì—ì„œ ì‚¬ìš©í•  uuidì…ë‹ˆë‹¤.
const { v4: uuid } = require("uuid");
// í•­ê³µí¸ ì˜ˆì•½ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
let booking = [];

module.exports = {
  // [GET] /book ìš”ì²­ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
  // ì „ì²´ ì˜ˆì•½ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
  findAll: (req, res) => {
    return res.status(200).json(booking);
  },
  // [GET] /book/:phone ìš”ì²­ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
  // ìš”ì²­ ëœ phoneê³¼ ë™ì¼í•œ phone ì˜ˆì•½ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
  findByPhone: (req, res) => {
    const { phone } = req.params;
    let phonefilter = booking.filter((item) => {
      return phone === item.phone;
    });
    return res.json(phonefilter);
  },
  // [GET] /book/:phone/:flight_uuid ìš”ì²­ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
  // ìš”ì²­ ëœ id, phoneê³¼ ë™ì¼í•œ uuid, phone ì˜ˆì•½ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
  findByPhoneAndFlightId: (req, res) => {
    const { phone, flight_uuid } = req.params;
    // TODO:
    if (phone && flight_uuid) {
      let filtered = booking.filter((item) => {
        return phone === item.phone && flight_uuid === item.flight_uuid;
      });
      return res.json(filtered);
    }
    return res.json(booking);
  },
  // [POST] /book ìš”ì²­ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
  // ìš”ì²­ ëœ ì˜ˆì•½ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
  create: (req, res) => {
    // POST /bookì—ì„œ ì‚¬ìš©í•  booking_uuidì…ë‹ˆë‹¤.
    const booking_uuid = uuid();
    // TODO:
    booking.push({ booking_uuid, ...req.body });
    return res.json(booking);
  },

  // Optional
  // [DELETE] /book/:booking_uuid ìš”ì²­ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
  // ìš”ì²­ ëœ id, phone ê°’ê³¼ ë™ì¼í•œ ì˜ˆì•½ ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
  deleteByBookingId: (req, res) => {
    const { booking_uuid } = req.params;
    // TODO:
  },
};
```
