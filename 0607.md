# [23.06.07] ì½”ë“œìŠ¤í…Œì´ì¸  (FE) 45ê¸°\_DAY 39

# Unit10 <br><br> ğŸ‘©ğŸ»â€ğŸ’» ê³¼ì œ. ë‚˜ë§Œì˜ ì•„ê³ ë¼ ìŠ¤í…Œì´ì¸  ì„œë²„ ë§Œë“¤ê¸°

App.js

```js
const express = require("express");
const app = express();

const cors = require("cors");
const morgan = require("morgan");

// morgan ë¯¸ë“¤ì›¨ì–´ê°€ ì„¸íŒ…ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
// HTTP ìš”ì²­ loggerë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¯¸ë“¤ì›¨ì–´ ì…ë‹ˆë‹¤.
app.use(morgan("tiny"));

// TODO: corsë¥¼ ì ìš©í•©ë‹ˆë‹¤.
app.use(cors());

// TODO: Express ë‚´ì¥ ë¯¸ë“¤ì›¨ì–´ì¸ express.json()ì„ ì ìš©í•©ë‹ˆë‹¤.
app.use(express.json());

const port = 4000;
const discussionsRouter = require("./router/discussions");

// TODO: app.use()ë¥¼ í™œìš©í•˜ì—¬ /discussions ê²½ë¡œë¡œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤.
app.use("/discussions", discussionsRouter);

app.get("/", (req, res) => {
  // ì„œë²„ ìƒíƒœ í™•ì¸ì„ ìœ„í•´ ìƒíƒœ ì½”ë“œ 200ê³¼ í•¨ê»˜ ì‘ë‹µì„ ë³´ëƒ…ë‹ˆë‹¤.
  res.status(200).send("fe-sprint-my-agora-states-server");
});

const server = app.listen(port, () => {
  console.log(`[RUN] My Agora States Server... | http://localhost:${port}`);
});

module.exports.app = app;
module.exports.server = server;
```

index.js

```js
const { agoraStatesDiscussions } = require("../repository/discussions");
const discussionsData = agoraStatesDiscussions;

const discussionsController = {
  findAll: (req, res) => {
    // TODO: ëª¨ë“  discussions ëª©ë¡ì„ ì‘ë‹µí•©ë‹ˆë‹¤.
    res.status(200).json(discussionsData);
  },

  findById: (req, res) => {
    // TODO: ìš”ì²­ìœ¼ë¡œ ë“¤ì–´ì˜¨ idì™€ ì¼ì¹˜í•˜ëŠ” discussionì„ ì‘ë‹µí•©ë‹ˆë‹¤.
    const { id } = req.params;

    const discussion = discussionsData.find(
      (discussion) => discussion.id === Number(id)
    );

    if (discussion) {
      const { id, title, url, author, bodyHTML, avatarUrl } = discussion;
      return res.status(200).json(discussion);
    } else {
      return res.status(404).json({ message: "Discussion not found" });
    }
  },
};

module.exports = {
  discussionsController,
};
```

discussion.js

```js
// TODO: discussions ë¼ìš°í„°ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.
const { discussionsController } = require("../controller");
const { findAll, findById } = discussionsController;
const express = require("express");
const router = express.Router();

// TODO: ëª¨ë“  discussions ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ë¼ìš°í„°ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
router.get("/", findAll);

// TODO: :idì— ë§ëŠ” discussionì„ ì¡°íšŒí•˜ëŠ” ë¼ìš°í„°ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
router.get("/:id", findById);

module.exports = router;
```
