# [23.05.17] ì½”ë“œìŠ¤í…Œì´ì¸  (FE) 45ê¸°_DAY 26
# ì˜¤ëŠ˜ ëŠë‚€ ì  ğŸ§

***
# Unit3 <br><br>ğŸ‘©ğŸ»â€ğŸ’» Chapter 4. fetch API
## âœ”ï¸ fetchë¥¼ ì´ìš©í•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­
ë‹¤ìŒì€ í”íˆ ë³¼ ìˆ˜ ìˆëŠ” í¬í„¸ ì‚¬ì´íŠ¸ì´ë‹¤.
![](https://urclass-images.s3.ap-northeast-2.amazonaws.com/immersive-sprints/asynchronous/portal.png)

ì´ ì‚¬ì´íŠ¸ëŠ” ì‹œì‹œê°ê° ë³€í•˜ëŠ” ì •ë³´ì™€, ëŠ˜ ê³ ì •ì ì¸ ì •ë³´ê°€ ë”°ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ ì¤‘ì—ì„œ ìµœì‹  ë‰´ìŠ¤ë‚˜ ë‚ ì”¨/ë¯¸ì„¸ë¨¼ì§€ ì •ë³´ê°€ ë°”ë¡œ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì•¼ í•˜ëŠ” ì •ë³´ì´ë‹¤.

ì´ëŸ´ ë•Œ ë§ì€ ì›¹ì‚¬ì´íŠ¸ì—ì„œëŠ” í•´ë‹¹ ì •ë³´ë§Œ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ ìš”ì²­ APIë¥¼ ì´ìš©í•œë‹¤. ê·¸ ì¤‘ ëŒ€í‘œì ì¸ fetch APIë¥¼ ì´ìš©í•´ í•´ë‹¹ ì •ë³´ë¥¼ ì›ê²© URLë¡œë¶€í„° ë¶ˆëŸ¬ì˜¤ëŠ” ê²½ìš°ë¥¼ ì„¤ëª…í•œë‹¤. ë‹¤ìŒì€ ì›ê²© URLë¡œë¶€í„° ì •ë³´ë¥¼ ë°›ì•„ì™€ì„œ íŠ¹ì • DOM ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ì»¨ì…‰ì„ ë„ì‹í™”í•œ ê·¸ë¦¼ì´ë‹¤.

![](https://urclass-images.s3.ap-northeast-2.amazonaws.com/immersive-sprints/asynchronous/portal-highlight-2.png)

fetch APIëŠ” ìœ„ì™€ ê°™ì´, íŠ¹ì • URLë¡œë¶€í„° ì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ” ì—­í• ì„ í•œë‹¤. ì´ ê³¼ì •ì´ ë¹„ë™ê¸°ë¡œ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì—, ê²½ìš°ì— ë”°ë¼ ë‹¤ì†Œ ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ì‘ì—…ì„ ìš”êµ¬í•  ê²½ìš°ì—ëŠ” blockingì´ ë°œìƒí•˜ë©´ ì•ˆë˜ë¯€ë¡œ, íŠ¹ì • DOMì— ì •ë³´ê°€ í‘œì‹œë  ë•Œê¹Œì§€ ë¡œë”© ì°½ì„ ëŒ€ì‹  ë„ìš°ëŠ” ê²½ìš°ë„ ìˆë‹¤.

### fetch API
í¬ë¡¬ ë¸Œë¼ìš°ì €ì˜ ìƒˆ íƒ­ì„ ì—° í›„, ê°œë°œì ë„êµ¬ì˜ ì½˜ì†”ì— ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•´ë³´ì.

```js
let url =
"http://koreanjson.com/posts/1";
fetch(url)
.then((response) => response.json())
.then((json) => console.log(json))
.catch((error) => console.log(error));
```

## âœ”ï¸ ê³¼ì œ fetch API
Bare minimum requirements

ë¨¼ì €, ì„œë²„ë¥¼ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.
í„°ë¯¸ë„ì—ì„œ npm run server:part-3ìœ¼ë¡œ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë²„ë¥¼ ì‹¤í–‰í•œ ìƒíƒœì—ì„œëŠ” ë‹¤ìŒ URLì„ í†µí•´ ì •ë³´ë¥¼ ì–»ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìµœì‹  ë‰´ìŠ¤: http://localhost:4999/data/latestNews
ë‚ ì”¨ ì •ë³´: http://localhost:4999/data/weather
'part-3/SpecRunner.html'ì„ í†µí•´ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


Getting started

íŒŒì¼ ì´ë¦„ì— í‘œì‹œëœ ë²ˆí˜¸ ìˆœì„œëŒ€ë¡œ ì§„í–‰í•´ ì£¼ì„¸ìš”.

basicChaining  â¡ï¸  promiseAll  â¡ï¸  asyncAwait

1. 'part-3/01_basicChaining.js'ëŠ”, fetchë¥¼ ì´ìš©í•´ì„œ í•´ê²°í•´ì•¼ í•©ë‹ˆë‹¤.

http://localhost:4999/data/latestNews ìš”ì²­ê³¼ http://localhost:4999/data/weather ìš”ì²­ì˜ ê²°ê³¼ë¥¼ í•˜ë‚˜ì˜ ê°ì²´ë¡œ í•©ì¹˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

2. 'part-3/02_promiseAll.js'ëŠ”, ë§ˆì°¬ê°€ì§€ë¡œ getNewsAndWeatherê³¼ ì •í™•íˆ ê°™ì€ ê²°ê³¼ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ë²ˆì—ëŠ” ë°˜ë“œì‹œ Promise.allì„ ì‚¬ìš©í•´ì„œ í•´ê²°í•´ì•¼ í•©ë‹ˆë‹¤.

3. 'part-3/03_asyncAwait.js'ëŠ”, getNewsAndWeather, getNewsAndWeatherAllê³¼ ê°™ì€ ê²°ê³¼ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” async ë° await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

### basicChaining
```js
const newsURL = 'http://localhost:4999/data/latestNews';
const weatherURL = 'http://localhost:4999/data/weather';

function getNewsAndWeather() {
  // TODO: fetchì„ ì´ìš©í•´ ì‘ì„±í•©ë‹ˆë‹¤
  // TODO: ì—¬ëŸ¬ê°œì˜ Promiseë¥¼ thenìœ¼ë¡œ ì—°ê²°í•˜ì—¬ ì‘ì„±í•©ë‹ˆë‹¤
  return fetch(newsURL) //newsURLì„ ë°›ì•„ì„œ
    .then((response) => response.json()) //parsing ì‹œì¼œì£¼ê³ 
    .then((json1) => {
      return fetch(weatherURL) //weatherURLì„ ë°›ì•„ì„œ
        .then((response) => response.json())//parsing ì‹œì¼œì£¼ê³ 
        .then((json2) => {
          return { // ê°ì²´ì•ˆì— ëª¨ì•„ì„œ ë¦¬í„´í•´ì¤€ë‹¤.
            news : json1.data, 
            weather : json2
          };
        })
      });
}

if (typeof window === 'undefined') {
  module.exports = {
    getNewsAndWeather
  }
}
```

### promiseAll
```js
function getNewsAndWeatherAll() {
  // TODO: Promise.allì„ ì´ìš©í•´ ì‘ì„±í•©ë‹ˆë‹¤
  return Promise.all([
    fetch(newsURL).then(response => response.json()),
    fetch(weatherURL).then(response => response.json())
  ])
  .then((data) => {
    return {news : data[0].data, weather : data[1]};
  })
}

if (typeof window === 'undefined') {
  module.exports = {
    getNewsAndWeatherAll
  }
}

```

### asyncAwait
```js
async function getNewsAndWeatherAsync() {
  // TODO: async/await í‚¤ì›Œë“œë¥¼ ì´ìš©í•´ ì‘ì„±í•©ë‹ˆë‹¤
  let news = await fetch(newsURL).then(response => response.json())
  let weather = await fetch(weatherURL).then(response => response.json())
  return {news: news.data, weather: weather};
}
if (typeof window === 'undefined') {
  module.exports = {
    getNewsAndWeatherAsync
  }
}
```

## âœ”ï¸ axios
### Axiosë€?
ì•ì„œ fetch APIë¥¼ í†µí•´ íŠ¹ì • URLë¡œë¶€í„° ì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ” ì—°ìŠµì„ í–ˆë‹¤. ì´ë²ˆì—ëŠ” fetch APIì™€ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ Axiosì— ëŒ€í•´ ì•Œì•„ë³´ì. AxiosëŠ” ë¸Œë¼ìš°ì €, Node.jsë¥¼ ìœ„í•œ Promise APIë¥¼ í™œìš©í•˜ëŠ” HTTPë¹„ë™ê¸° í†µì‹  ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤. AxiosëŠ” Fetch APIë³´ë‹¤ ì‚¬ìš©ì´ ê°„í¸í•˜ë©´ì„œ ì¶”ê°€ì ì¸ ê¸°ëŠ¥ë“¤ì´ í¬í•¨ë˜ì–´ ìˆë‹¤.

### Fetch API vs Axios

| Axios | Fetch API |
|:----------|:----------:|
| ì¨íŠ¸íŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì„¤ì¹˜ê°€ í•„ìš”í•˜ë‹¤.| ë¹ŒíŠ¸ì¸ APIë¼ ë³„ë„ì˜ ì„¤ì¹˜ í•„ìš” ì—†ìŒ |
| ìë™ìœ¼ë¡œ JSON ë°ì´í„° í˜•ì‹ìœ¼ë¡œ ë³€í™˜ëœë‹¤. | .json()ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. |

### Axios ì‚¬ìš©ë²•
AxiosëŠ” ì¨ë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì„¤ì¹˜í•´ì•¼ í•œë‹¤.
```js
npm install axios
```
AxiosëŠ” fetch APIì™€ ê¸°ë³¸ ì›ë¦¬ëŠ” ê°™ë‹¤. ë‹¤ìŒì€ GET, POST ìš”ì²­ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ì.

#### GET ìš”ì²­
GET ìš”ì²­ì€ ì¼ë°˜ì ìœ¼ë¡œ ì •ë³´ë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ë©”ì„œë“œì´ë‹¤. ì²« ë²ˆì§¸ ì¸ìì—ëŠ” urlì£¼ì†Œê°€ ë“¤ì–´ê°„ë‹¤. urlì£¼ì†ŒëŠ” í•„ìˆ˜ì´ë‹¤. ë‘ ë²ˆì§¸ ì¸ìì—ëŠ” ìš”ì²­ ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ë“¤ì„ ì„¤ì •í•˜ê²Œ ëœë‹¤. ì˜µì…˜ì˜ ê²½ìš° í•„ìˆ˜ëŠ” ì•„ë‹ˆë‹¤.

```js
axios.get("url"[,config])
```
ì˜ˆì‹œ
ì•„ë˜ëŠ” fetch API ì™€ axios GET ìš”ì²­ì˜ ì˜ˆì‹œì´ë‹¤. ì´ë¥¼ í†µí•´ fetch APIì™€ axiosì˜ ì‚¬ìš©ë²•ê³¼ ì°¨ì´ì ì„ í™•ì¸í•´ë³´ì. ë˜í•œ, Promise ë²„ì „ê³¼ Async / Await ë²„ì „ë„ ìˆìœ¼ë‹ˆ Promiseì™€ Async / Await ì˜ ì°¨ì´ì ë„ ê°™ì´ í™•ì¸í•´ë³´ì.

```js
// Promise ver
fetch('https://koreanjson.com/users/1', { method: 'GET' })
  .then((response) => response.json())
  .then((json) => console.log(json))
  .catch((error) => console.log(error));

// Async / Await ver
// async function request() {
//   const response = await fetch('https://koreanjson.com/users/1', {
//     method: 'GET',
//   });
//   const data = await response.json();
//   console.log(data);
// }

// request();

const appDiv = document.getElementById('app');
appDiv.innerHTML = `
<h1>Fetch API ğŸ˜Š</h1>
<h3>console ì°½ì„ í™•ì¸í•´ì£¼ì„¸ìš”! ğŸ‘‡ğŸ‘‡ğŸ‘‡</h3>
`;
```
Fetch API

```js
// axiosë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì„¤ì¹˜í•œ axiosë¥¼ ë¶ˆëŸ¬ì™€ì•¼ í•©ë‹ˆë‹¤.
import axios from 'axios';

// Promise ver
axios
  .get('https://koreanjson.com/users/1')
  .then((response) => {
    console.log(response);
    const { data } = response;
    console.log(data);
  })
  .catch((error) => console.log(error));

// Async / Await ver
// async function request() {
//   const response = await axios.get('https://koreanjson.com/users/1');
//   const { data } = response;
//   console.log(data);
// }

// request();

const appDiv = document.getElementById('app');
appDiv.innerHTML = `
<h1>Axios â˜ºï¸</h1>
<h3>console ì°½ì„ í™•ì¸í•´ì£¼ì„¸ìš”! ğŸ‘‡ğŸ‘‡ğŸ‘‡</h3>
`;
```
Axios
<br>

#### POST ìš”ì²­
POST ìš”ì²­ì€ ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ë³´ë‚´ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ë©”ì„œë“œì´ë‹¤. ì²« ë²ˆì§¸ ì¸ìì—ëŠ” urlì£¼ì†Œê°€ ë“¤ì–´ê°„ë‹¤. urlì£¼ì†ŒëŠ” í•„ìˆ˜ì´ë‹¤. ë‘ ë²ˆì§¸ ì¸ìì—ëŠ” ìš”ì²­ ì‹œ ë³´ë‚¼ ë°ì´í„°ë¥¼ ì„¤ì •í•˜ê²Œ ëœë‹¤. ì˜µì…˜ì˜ ê²½ìš°ëŠ” í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ ìƒí™©ì— ë”°ë¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.

```js
axios.post("url"[, data[, config]])
```

ì˜ˆì‹œ

ì•„ë˜ëŠ” fetch APIì™€ axios POST ìš”ì²­ì˜ ì˜ˆì‹œì´ë‹¤. ì´ë¥¼ í†µí•´ fetch API ì™€ axios ì˜ ì‚¬ìš©ë²•ê³¼ ì°¨ì´ì ì„ í™•ì¸í•´ ë³´ì. Promise ë²„ì „ê³¼ Async / Await ë²„ì „ë„ ìˆìœ¼ë‹ˆ Promiseì™€ Async / Await ì˜ ì°¨ì´ì ë„ ê°™ì´ í™•ì¸í•´ë³´ì. 

```js
// Promise ver
fetch('https://koreanjson.com/users', {
  method: 'POST',
  headers: {
    // JSONì˜ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ì¤€ë‹¤ê³  ì„œë²„ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì—­í• ì…ë‹ˆë‹¤.
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({ nickName: 'ApeachIcetea', age: 20 }),
})
  .then((response) => response.json())
  .then((json) => console.log(json))
  .catch((error) => console.log(error));

// Async / Await ver
// async function request() {
//   const response = await fetch('https://koreanjson.com/users', {
//     method: 'POST',
//     headers: {
//       'Content-Type': 'application/json',
//     },
//     body: JSON.stringify({ nickName: 'ApeachIcetea', age: 20 }),
//   });
//   const data = await response.json();
//   console.log(data);
// }

// request();

const appDiv = document.getElementById('app');
appDiv.innerHTML = `
<h1>Fetch API ğŸ˜Š</h1>
<h3>console ì°½ì„ í™•ì¸í•´ì£¼ì„¸ìš”! ğŸ‘‡ğŸ‘‡ğŸ‘‡</h3>
`;
```
Fetch APIì˜ POSTìš”ì²­

```js
// axiosë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì„¤ì¹˜í•œ axiosë¥¼ ë¶ˆëŸ¬ì™€ì•¼ í•©ë‹ˆë‹¤.
import axios from 'axios';

// Promise ver
axios
  .post('https://koreanjson.com/users', { nickName: 'ApeachIcetea', age: '20' })
  .then((response) => {
    const { data } = response;
    console.log(data);
  })
  .catch((error) => console.log(error));

// Async / Await ver
// async function request() {
//   const response = await axios.post('https://koreanjson.com/users', {
//     name: 'ApeachIcetea',
//     age: '20',
//   });
//   const { data } = response;
//   console.log(data);
// }

// request();

const appDiv = document.getElementById('app');
appDiv.innerHTML = `
<h1>Axios â˜ºï¸</h1>
<h3>console ì°½ì„ í™•ì¸í•´ì£¼ì„¸ìš”! ğŸ‘‡ğŸ‘‡ğŸ‘‡</h3>
`;
```
Axiosì˜ POSTìš”ì²­
***

# ğŸ‘©ğŸ»â€ğŸ’» ì¢…í•©í€´ì¦ˆ